---
id: 69432dffbce99707bc08664e
title: Step 1
challengeType: 0
dashedName: step-1
# demoType can either be 'onClick' or 'onLoad'. If the project or lab doesn't have a preview, delete the property
demoType: onClick
---

# --description--

In this lab, you will build a small pantry management program using basic JavaScript concepts like arrays, objects, loops, and conditionals. 

You will simulate receiving a shipment of pantry items, deciding what to do with each item, and organizing the results for storage. Complete the items in the user stories below and get all the tests to pass.

**User Stories:**

1. You should implement a parseShipment(rawData) function that takes an array of strings and returns an array of { sku, name, qty, expires } objects.

2. You should implement a planRestock(pantry, shipment) function that compares the current pantry with the incoming shipment and returns an array of actions in the form { type: "restock" | "discard" | "donate", item }.

3. You should implement a groupByZone(actions) function that groups the actions into storage zones based on each itemâ€™s zone property.

4. You should implement a clonePantry(pantry) function that returns a deep copy of the pantry so planning changes do not affect the original list.
A deep copy means creating a new array with new objects, so modifying the copy does not change the original pantry.

5. You should use all of the functions together to process a shipment and log the final grouped result to the console.

# --hints--

Test 1

```js
// Hint 1: You can split each shipment string using "|" to get sku, name, qty, and expires.
// Hint 2: Use a Set or array to track duplicate SKUs when parsing the shipment.
// Hint 3: When restocking, check if the SKU exists in the pantry using array methods like some().
// Hint 4: To create a deep copy of the pantry, use map() to create new objects.
// Hint 5: When grouping by zone, check if the item has a zone property; if not, put it in "general".

```

# --seed--

## --seed-contents--

```js
--fcc-editable-region--

function parseShipment(rawData) {
  if (!Array.isArray(rawData)) return [];

  const result = [];
  const seenSKUs = new Set();

  for (const line of rawData) {
    const [sku, name, qtyStr, expires] = line.split("|").map(s => s.trim());
    if (seenSKUs.has(sku)) continue;
    seenSKUs.add(sku);

    result.push({ sku, name, qty: Number(qtyStr), expires });
  }

  return result;
}

function planRestock(pantry, shipment) {
  const actions = [];

  for (const item of shipment) {
    if (item.qty <= 0) {
      actions.push({ type: "discard", item });
      continue;
    }

    const exists = pantry.some(p => p.sku === item.sku);
    actions.push({ type: exists ? "restock" : "donate", item });
  }

  return actions;
}

function groupByZone(actions) {
  const zones = {};

  for (const action of actions) {
    const zone = action.item.zone || "general";
    if (!zones[zone]) zones[zone] = [];
    zones[zone].push(action);
  }

  return zones;
}

function clonePantry(pantry) {
  return pantry.map(item => ({
    sku: item.sku,
    name: item.name,
    qty: item.qty,
    expires: item.expires,
    zone: item.zone
  }));
}

// Example pantry and shipment to test
const pantry = [
  { sku: "A12", name: "Tomatoes", qty: 4, expires: "2025-01-10", zone: "fridge" },
  { sku: "B44", name: "Pasta", qty: 2, expires: "2026-03-02", zone: "pantry" }
];

const rawShipment = [
  "A12|Tomatoes|5|2025-01-10",
  "C77|Rice|3|2026-01-01",
  "C77|Rice|3|2026-01-01"
];

const shipment = parseShipment(rawShipment);
const pantryCopy = clonePantry(pantry);
const actions = planRestock(pantryCopy, shipment);
const grouped = groupByZone(actions);

console.log(grouped);
--fcc-editable-region--
```
