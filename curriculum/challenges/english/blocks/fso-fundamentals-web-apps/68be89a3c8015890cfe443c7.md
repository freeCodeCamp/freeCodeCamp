---
id: 68be89a3c8015890cfe443c7
title: Event handlers and Callback functions
challengeType: 19
dashedName: event-handlers-and-callback-functions
---

# --description--

The structure of this code is a bit odd:

```js
var xhttp = new XMLHttpRequest()

xhttp.onreadystatechange = function() {
  // code that takes care of the server response
}

xhttp.open('GET', '/data.json', true)
xhttp.send()
```

The request to the server is sent on the last line, but the code to handle the response can be found further up. What's going on?

```js
xhttp.onreadystatechange = function () {
```

On this line, an event handler for the event `onreadystatechange` is defined for the `xhttp` object doing the request. When the state of the object changes, the browser calls the event handler function. The function code checks that the `readyState` equals `4` (which depicts the situation "The operation is complete") and that the `HTTP` status code of the response is `200`.

```js
xhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    // code that takes care of the server response
  }
}
```

The mechanism of invoking event handlers is very common in JavaScript. Event handler functions are called [callback](https://developer.mozilla.org/en-US/docs/Glossary/Callback_function) functions. The application code does not invoke the functions itself, but the runtime environment - the browser - invokes the function at an appropriate time when the event has occurred.



# --questions--

## --text--

In the example code using `XMLHttpRequest`, why is the response-handling code placed before `xhttp.send()`?

## --answers--

Because JavaScript event handlers (like `onreadystatechange`) are callback functions that the browser calls automatically when the request state changes.  

---

Because the server requires the handler to be defined first in order to accept the request.  

### --feedback--

The server does not require this. It is about how the browser handles asynchronous events.

---

Because JavaScript always executes code from bottom to top.  

### --feedback--

JavaScript executes code top to bottom. Callbacks are an exception because they are invoked later by the environment.

---

Because `xhttp.send()` cannot run unless a function is defined right above it.  

### --feedback--

That is not true. The position is about defining the callback before the asynchronous event fires.

## --video-solution--

1
